{"version":3,"file":"getPhoneInputWithCountryStateUpdateFromNewProps.test.js","names":["getPhoneInputWithCountryStateUpdateFromNewProps","newProps","prevProps","state","_getPhoneInputWithCountryStateUpdateFromNewProps","metadata","describe","it","reset","defaultCountry","should","deep","equal","phoneDigits","undefined","value","country","hasUserSelectedACountry","international","expect","to","be"],"sources":["../../source/helpers/getPhoneInputWithCountryStateUpdateFromNewProps.test.js"],"sourcesContent":["import metadata from 'libphonenumber-js/min/metadata'\n\nimport _getPhoneInputWithCountryStateUpdateFromNewProps from './getPhoneInputWithCountryStateUpdateFromNewProps.js'\n\nfunction getPhoneInputWithCountryStateUpdateFromNewProps(newProps, prevProps, state) {\n\treturn _getPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t{\n\t\t\t...newProps,\n\t\t\tmetadata\n\t\t},\n\t\t{\n\t\t\t...prevProps,\n\t\t\tmetadata\n\t\t},\n\t\tstate\n\t)\n}\n\ndescribe('getPhoneInputWithCountryStateUpdateFromNewProps', () => {\n\tit('should get state update from new props (reset)', () => {\n\t\tgetPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\treset: true,\n\t\t\t\tdefaultCountry: 'RU'\n\t\t\t},\n\t\t\t{},\n\t\t\t{}\n\t\t).should.deep.equal({\n\t\t\tphoneDigits: undefined,\n\t\t\tvalue: undefined,\n\t\t\tcountry: 'RU',\n\t\t\thasUserSelectedACountry: undefined\n\t\t})\n\t})\n\n\tit('should get state update from new props (reset) (international)', () => {\n\t\tgetPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\treset: true,\n\t\t\t\tinternational: true,\n\t\t\t\tdefaultCountry: 'RU'\n\t\t\t},\n\t\t\t{},\n\t\t\t{}\n\t\t).should.deep.equal({\n\t\t\tphoneDigits: '+7',\n\t\t\tvalue: undefined,\n\t\t\tcountry: 'RU',\n\t\t\thasUserSelectedACountry: undefined\n\t\t})\n\t})\n\n\tit('should get state update from new props (default country did not change)', () => {\n\t\texpect(getPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tdefaultCountry: 'RU'\n\t\t\t},\n\t\t\t{\n\t\t\t\tdefaultCountry: 'RU'\n\t\t\t},\n\t\t\t{}\n\t\t)).to.be.undefined\n\t})\n\n\tit('should get state update from new props (default country changed) (no `value`)', () => {\n\t\tgetPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tdefaultCountry: 'RU'\n\t\t\t},\n\t\t\t{\n\t\t\t\tdefaultCountry: 'US'\n\t\t\t},\n\t\t\t{}\n\t\t).should.deep.equal({\n\t\t\tcountry: 'RU',\n\t\t\tphoneDigits: undefined,\n\t\t\tvalue: undefined\n\t\t})\n\t})\n\n\tit('should get state update from new props (default country changed) (no `value`) (new country not supported)', () => {\n\t\texpect(getPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tdefaultCountry: 'XX'\n\t\t\t},\n\t\t\t{\n\t\t\t\tdefaultCountry: 'US'\n\t\t\t},\n\t\t\t{}\n\t\t)).to.be.undefined\n\t})\n\n\tit('should get state update from new props (default country changed) (`value` is intl prefix)', () => {\n\t\tgetPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tinternational: true,\n\t\t\t\tdefaultCountry: 'CA'\n\t\t\t},\n\t\t\t{\n\t\t\t\tinternational: true,\n\t\t\t\tdefaultCountry: 'US'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: '+1'\n\t\t\t}\n\t\t).should.deep.equal({\n\t\t\tcountry: 'CA',\n\t\t\tphoneDigits: '+1',\n\t\t\tvalue: undefined\n\t\t})\n\t})\n\n\tit('should get state update from new props (default country changed) (has `value`)', () => {\n\t\texpect(getPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tvalue: '+78005553535',\n\t\t\t\tdefaultCountry: 'FR'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: '+78005553535',\n\t\t\t\tdefaultCountry: 'RU'\n\t\t\t},\n\t\t\t{}\n\t\t)).to.be.undefined\n\t})\n\n\tit('should get state update from new props (default country changed to `undefined`) (has `value`)', () => {\n\t\texpect(getPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tvalue: undefined,\n\t\t\t\tdefaultCountry: 'FR'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: undefined,\n\t\t\t\tdefaultCountry: undefined\n\t\t\t},\n\t\t\t{}\n\t\t)).to.deep.equal({\n\t\t\tcountry: 'FR',\n\t\t\tphoneDigits: undefined,\n\t\t\tvalue: undefined\n\t\t})\n\t})\n\n\tit('should get state update from new props (`value` changed: undefined -> value)', () => {\n\t\tgetPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tvalue: '+78005553535',\n\t\t\t\tdefaultCountry: 'FR'\n\t\t\t},\n\t\t\t{\n\t\t\t\tdefaultCountry: 'US'\n\t\t\t},\n\t\t\t{}\n\t\t).should.deep.equal({\n\t\t\tcountry: 'RU',\n\t\t\tphoneDigits: '+78005553535',\n\t\t\tvalue: '+78005553535'\n\t\t})\n\t})\n\n\tit('should get state update from new props (`value` changed: value -> undefined)', () => {\n\t\tgetPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tdefaultCountry: 'RU'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: '+78005553535',\n\t\t\t\tdefaultCountry: 'RU'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: '+78005553535'\n\t\t\t}\n\t\t).should.deep.equal({\n\t\t\tcountry: 'RU',\n\t\t\tphoneDigits: undefined,\n\t\t\tvalue: undefined,\n\t\t\thasUserSelectedACountry: undefined\n\t\t})\n\t})\n\n\t// https://github.com/catamphetamine/react-phone-number-input/issues/377\n\tit('should get state update from new props (`value` changed: undefined -> +78)', () => {\n\t\tgetPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{ value: '+78' },\n\t\t\t{},\n\t\t\t{}\n\t\t).should.deep.equal({\n\t\t\tcountry: 'RU',\n\t\t\tphoneDigits: '+78',\n\t\t\tvalue: '+78'\n\t\t})\n\t})\n\n\tit('should get state update from new props (`value` changed, but already displayed)', () => {\n\t\texpect(getPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tvalue: '+78005553535'\n\t\t\t},\n\t\t\t{},\n\t\t\t{\n\t\t\t\tvalue: '+78005553535'\n\t\t\t}\n\t\t)).to.be.undefined\n\t})\n\n\tit('should get state update from new props (`value` did not change)', () => {\n\t\texpect(getPhoneInputWithCountryStateUpdateFromNewProps(\n\t\t\t{\n\t\t\t\tvalue: '+78005553535'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: '+78005553535'\n\t\t\t},\n\t\t\t{}\n\t\t)).to.be.undefined\n\t})\n})"],"mappings":"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"}